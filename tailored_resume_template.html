<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>{{ header.name }} - Tailored Resume</title>
  <style>
    body { font-family: Arial, sans-serif; font-size: 10pt; margin: 40px; color: #000; background-color: #fff; }
    h1 { font-size: 18pt; margin-top: 4px; margin-bottom: 2px; }
    h2 { font-size: 13pt; margin-top: 4px; margin-bottom: 2px; }
    h3 { font-size: 11pt; margin-top: 2px; margin-bottom: 2px; }
    .section { margin-bottom: 12px; }
    .contribution { margin-left: 18px; }
    ul { margin-top: 0; padding-left: 18px; }
    hr { border: none; border-top: 1px solid #ccc; margin: 6px 0 12px 0; }
    a { color: #0366d6; text-decoration: none; }
    /* Highlight styling (light mode) */
    mark { background: #ffea70; color: #000; padding: 0 2px; border-radius: 2px; }

    /* Dark mode */
    @media (prefers-color-scheme: dark) {
      body { color: #fff; background-color: #000; }
      a { color: #4ea3ff; }
      h1, h2, h3 { color: #fff; }
      hr { border-top: 1px solid #555; }
      /* Make highlights readable in dark mode */
      mark { background: #777; color: #fff; }
    }
  </style>
</head>
<body>

  <!--NOHL_START-->
  <!-- HEADER / CONTACT -->
  <h1>{{ header.name }}</h1>
  <h3>{{ header.title }}</h3>
  <p>
    {{ header.location }} | {{ header.phone }} | {{ header.email }}<br />
    {% if header.linkedin %}LinkedIn: <a href="https://{{ header.linkedin }}">{{ header.linkedin }}</a>{% endif %}
    {% if header.github %} | GitHub: <a href="https://{{ header.github }}">{{ header.github }}</a>{% endif %}
    {% if header.portfolio %} | Portfolio: <a href="https://{{ header.portfolio }}">{{ header.portfolio }}</a>{% endif %}
  </p>
  <hr />
  <!--NOHL_END-->

  <!-- TAILORED SUMMARY -->
  <h2>Tailored Summary</h2>
  <p>{{ tailored_summary }}</p>
  <hr />

  <!-- MAIN RESUME SECTIONS -->
  {% for section in resume %}
    {% if section.type == 'summary' %}
      <div class="section">
        <h2>{{ section.title }}</h2>
        <p>{{ section.summary }}</p>
      </div>

    {% elif section.type == 'skills' or section.id.startswith('tech_') %}
      <div class="section">
        <h2>{{ section.title }}</h2>
        <p>{{ section.summary }}</p>
      </div>

    {% elif section.type == 'experience' %}
      <div class="section">
        <h2>{{ section.title }} — {{ section.company }}</h2>
        <p><em>{{ section.location }} | {{ section.dates }}</em></p>
        <p>{{ section.summary }}</p>
        <ul>
          {% for contrib in section.contributions %}
            <li class="contribution">
              {{ contrib.description }}
              {% if contrib.skills_used and contrib.skills_used|length > 0 %}
                <br /><small><strong>Skills:</strong> {{ contrib.skills_used | join(', ') }}</small>
              {% endif %}
              {% if contrib.impact %}
                <br /><small><em>Impact{% if contrib.source %} — {{ contrib.source }}{% endif %}</em></small>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>

    {% elif section.type in ['education', 'certifications', 'awards'] and section.entries and section.entries|length > 0 %}
      <div class="section">
        <h2>{{ section.title }}</h2>
        <ul>
          {% for entry in section.entries %}
            <li>
              {% for key, value in entry.items() %}
                {% if value %}{{ value }} {% endif %}
              {% endfor %}
            </li>
          {% endfor %}
        </ul>
      </div>

    {% elif section.type == 'projects' %}
      <div class="section">
          <h2>{{ section.title }}</h2>
          <ul>
              {% for proj in section.entries %}
                  <li>
                      <strong>{{ proj.name }}</strong>: {{ proj.description }}
                  </li>
              {% endfor %}
          </ul>
      </div>
    {% endif %}
  {% endfor %}

</body>
</html>
